@{
    ViewData["Title"] = "Search for MOT records";
}

<div class="text-center">
    <h1 class="display-4">MOT Checker</h1>
</div>

<div class="mx-auto mt-5 w-50 text-center">
    <img class="img-fluid" src="~/media/licenseplate.jpg" />
    <small>This app does not store any information and only provides access to MOT records for any UK vehicle.</small>

    <form method="post" enctype="multipart/form-data" asp-controller="Home" asp-action="Index">
        <div class="form-group">
            <label class="form-text font-weight-bold">Enter a valid UK registration number</label>
            <input oninput="this.value = this.value.toUpperCase()" autocomplete="off" class="text-center form-control"
                   placeholder="XX20XXX" pattern="(^[A-Z]{2}[0-9]{2}\s?[A-Z]{3}$)|(^[A-Z][0-9]{1,3}[A-Z]{3}$)|(^[A-Z]{3}[0-9]{1,3}[A-Z]$)|(^[0-9]{1,4}[A-Z]{1,2}$)|(^[0-9]{1,3}[A-Z]{1,3}$)|(^[A-Z]{1,2}[0-9]{1,4}$)|(^[A-Z]{1,3}[0-9]{1,3}$)|(^[A-Z]{1,3}[0-9]{1,4}$)|(^[0-9]{3}[DX]{1}[0-9]{3}$)" type="text" id="registration" name="registration" />
        </div>
        <div class="form-group">
            <input class="btn btn-primary" type="submit" value="Search" />
        </div>
    </form>
</div>

@if (ViewData["Error"].Equals(true))
{
    <h4 class="text-danger mt-5 text-center">@ViewData["ErrorMessage"]</h4>
}


@if (ViewData["SearchMade"].Equals(true))
{
    <div class="mx-auto text-center mt-5">

        <h2 class="mb-3">Results for @ViewData["license"]</h2>
        <div class="row">
            <div class="col-3">
                <h3 class="">Color:</h3>
                @ViewData["color"]
            </div>
            <div class="col-3">
                <h3>Fuel type:</h3>
                @ViewData["fuel"]
            </div>
            <div class="col-3">
                <h3>Make and model:</h3>
                @ViewData["make"] @ViewData["model"]
            </div>
            <div class="col-3">
                <h3>First used date:</h3>
                @ViewData["registered"]
            </div>
        </div>
        <hr />
        <h3 class="mb-2 mt-2">MOT Tests</h3>
        <small>(Most recent first)</small>
        <div class="row">

            @foreach (var item in (List<string>)ViewData["MotResults"])
            {
                <div class="col-4">

                    <div class="card mt-3 mx-1 font-weight-bold @(item.Contains("failed") ? "bg-warning" : "bg-success") ">@item</div>

                </div>
            }


        </div>
    </div>

}
